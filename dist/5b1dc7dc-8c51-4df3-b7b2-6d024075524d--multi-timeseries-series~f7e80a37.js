var __NR_MODULES="object"==typeof __NR_MODULES?__NR_MODULES:{};__NR_MODULES["5b1dc7dc-8c51-4df3-b7b2-6d024075524d--multi-timeseries-series"]=function(a){function e(e){for(var n,o,d=e[0],u=e[1],l=e[2],m=0,s=[];m<d.length;m++)o=d[m],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&s.push(r[o][0]),r[o]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(a[n]=u[n]);for(c&&c(e);s.length;)s.shift()();return i.push.apply(i,l||[]),t()}function t(){for(var a=0;a<i.length;a++){for(var e=i[a],t=!0,n=1;n<e.length;n++){var o=e[n];0!==r[o]&&(t=!1)}t&&i.splice(a--,1)}}var n={},r={0:0},i=[];function o(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return a[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=a,o.c=n,o.d=function(a,e,t){o.o(a,e)||Object.defineProperty(a,e,{enumerable:!0,get:t})},o.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},o.t=function(a,e){if(1&e&&(a=o(a)),8&e)return a;if(4&e&&"object"==typeof a&&a&&a.__esModule)return a;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:a}),2&e&&"string"!=typeof a)for(var n in a)o.d(t,n,function(e){return a[e]}.bind(null,n));return t},o.n=function(a){var e=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(e,"a",e),e},o.o=function(a,e){return Object.prototype.hasOwnProperty.call(a,e)},o.p="https://cli-assets.service.datanerd.us/artifact-index-production/5b1dc7dc-8c51-4df3-b7b2-6d024075524d/det/";var d=window["webpackJsonp__5b1dc7dc-8c51-4df3-b7b2-6d024075524d"]=window["webpackJsonp__5b1dc7dc-8c51-4df3-b7b2-6d024075524d"]||[],u=d.push.bind(d);d.push=e,d=d.slice();for(var l=0;l<d.length;l++)e(d[l]);var c=u;i.push(["wfRK",1]),t();var m={__publicPath:function(a){o.p=a},__factory:function(e,t){const n=function(e,t,n,r){var i={};function o(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return a[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}return i[e]={i:e,l:!0,exports:t},i[n]={i:n,l:!0,exports:r},o.m=a,o.c=i,o.d=function(a,e,t){o.o(a,e)||Object.defineProperty(a,e,{enumerable:!0,get:t})},o.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},o.t=function(a,e){if(1&e&&(a=o(a)),8&e)return a;if(4&e&&"object"==typeof a&&a&&a.__esModule)return a;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:a}),2&e&&"string"!=typeof a)for(var n in a)o.d(t,n,function(e){return a[e]}.bind(null,n));return t},o.n=function(a){var e=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(e,"a",e),e},o.o=function(a,e){return Object.prototype.hasOwnProperty.call(a,e)},o.p="https://cli-assets.service.datanerd.us/artifact-index-production/5b1dc7dc-8c51-4df3-b7b2-6d024075524d/det/",o}("Xznc",e,"evsE",t);return n("wfRK")}};return m}({Xznc:function(a,e){a.exports=function(){throw new Error('Could not initialize "nr1"')}()},evsE:function(a,e){a.exports=function(){throw new Error('Could not initialize "__nr1-internal__"')}()},wfRK:function(a,e,t){"use strict";t.r(e);var n=t("tzJr"),r=t("HCXi"),i=t("2ISw"),o=t.n(i),d=t("Xznc"),u=t("0d+u"),l=t("y9N3"),c=t("J+eN"),m=t("b+jq"),s=t("nJDY"),f=t("Yjvw"),p=t("wcMh"),h=t("BChI"),E=t("HTVX");function v(a,e){var t="undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(!t){if(Array.isArray(a)||(t=function(a,e){if(!a)return;if("string"==typeof a)return g(a,e);var t=Object.prototype.toString.call(a).slice(8,-1);"Object"===t&&a.constructor&&(t=a.constructor.name);if("Map"===t||"Set"===t)return Array.from(a);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return g(a,e)}(a))||e&&a&&"number"==typeof a.length){t&&(a=t);var n=0,r=function(){};return{s:r,n:function(){return n>=a.length?{done:!0}:{done:!1,value:a[n++]}},e:function(a){throw a},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,d=!1;return{s:function(){t=t.call(a)},n:function(){var a=t.next();return o=a.done,a},e:function(a){d=!0,i=a},f:function(){try{o||null==t.return||t.return()}finally{if(d)throw i}}}}function g(a,e){(null==e||e>a.length)&&(e=a.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=a[t];return n}var y,b,_=t("evsE").injectedPackages.react,x=_.__esModule?_.default:_,C=_.useState,I=_.useEffect,S=(_.useContext,["#e6194b","#3cb44b","#000000","#f58231","#911eb4","#f032e6","#bcf60c","#008080","#9a6324","#800000","#808000","#000075","#808080","#000000"]),D=10,w=1,q=!1,B=!1,M=!1,O=!1,A=!1;function R(a){var e,t=1/0,n=-1/0,r=v(a);try{for(r.s();!(e=r.n()).done;){var i=e.value;i<t&&(t=i),i>n&&(n=i)}}catch(a){r.e(a)}finally{r.f()}return[t,n]}function j(a){var e=[];a.forEach((function(a){a.data&&a.data[0]&&"trimmedarea"!=a.data[0].metadata.name&&"minmaxarea"!=a.data[0].metadata.name&&"clippedarea"!=a.data[0].metadata.name&&e.push(a.data[0])}));var t=[];e.forEach((function(a){a.data.forEach((function(a){t.push(a)}))}));var n=["x","y","begin_time","end_time"],r=[],i=[];return t.map((function(a){for(var e in a)i.includes(e)||(i[0]="x",i[1]="begin_time",i[2]="end_time",i[3]="y",n.includes(e)||(i[i.length]=e))})),t.map((function(a){for(var e={},t=0;t<i.length;t++)e[i[t]]=a[i[t]];r.push(e)})),r.sort((function(a,e){var t=a.x,n=e.x;return t<n?-1:t>n?1:0})),r}function F(a,e,t,n){var r={};return r.begin_time=a.begin_time,r.end_time=a.end_time,r.x=a.x,r.y=t[e],r[n]=t[e],r}function Q(a){var e=[];return a.forEach((function(a){e.push(a)})),e}function z(a){for(var e=[],t=[],n=[],r=[],i=[],o=[],d=[],u=[],l=[],c=[],m=[],s=function(t){var n=[];a.forEach((function(a,e){e>0&&n.push(a.data[0].data[t].y)})),e.push(n)},f=0;f<a[0].data[0].data.length;f++)s(f);var p=[],h=[],E=[],v=[],g=[],y=[],b=[],_=[],x=[],C=[];e.forEach((function(a){var e=R(a),t=e[0],n=e[1];p.push(function(a){for(var e=0,t=0;t<a.length;t++)e+=a[t];return parseInt(e/a.length)}(a));var r=parseInt(D/100*(n-t)+t),i=parseInt(n-D/100*(n-t));null==D&&(D=10),null==w&&(w=2),E.push(r),v.push(i),h.push([r,i]),y.push(t),b.push(n),g.push([t,n]);var o=R(function(a,e){var t=a.sort((function(a,e){return a-e}));return t.slice(e,t.length-e)}(a,parseInt(w)));_.push(o),x.push(o[0]),C.push(o[1])}));for(var I=0;I<a[0].data[0].data.length;I++){var q=a[0].data[0].data[I];c.push(F(q,I,p,"avg")),o.push(F(q,I,h,"trimmedarea")),r.push(F(q,I,E,"trimmedmin")),i.push(F(q,I,v,"trimmedmax")),m.push(F(q,I,g,"minmaxarea")),t.push(F(q,I,y,"min")),n.push(F(q,I,b,"max")),d.push(F(q,I,x,"clippedmin")),u.push(F(q,I,C,"clippedmax")),l.push(F(q,I,_,"clippedarea"))}var B=Q(c),M=Q(o),O=Q(r),A=Q(i),j=Q(m),z=Q(t),k=Q(n),P=Q(l),T=Q(d),N=Q(u);a.push({data:[{data:B,metadata:{viz:"main",name:"avg",id:"74B5B05EEA583471E03DCBF0123D81CC79CAE0FE9",color:S[1]}}],loading:!1,error:null}),a.push({data:[{data:M,metadata:{viz:"main",name:"trimmedarea",id:"74B5B05EEA583471E03DCBF0123D81CC79CEE0FE9",color:"#0262BC66"}}],loading:!1,error:null}),a.push({data:[{data:O,metadata:{viz:"main",name:"trimmedmin",id:"02D6A84F7B97E4709A11276615FDAAB3EE2BEE415",color:S[2]}}],loading:!1,error:null}),a.push({data:[{data:A,metadata:{viz:"main",name:"trimmedmax",id:"2C1F4F2BAA2800FD80F50C3811F38D03B52DEEEB1",color:S[2]}}],loading:!1,error:null}),a.push({data:[{data:P,metadata:{viz:"main",name:"clippedarea",id:"74B5B05EEA583471E03DCBF0123D81CC79CDE0JE8",color:"#22DC6499"}}],loading:!1,error:null}),a.push({data:[{data:T,metadata:{viz:"main",name:"clippedmin",id:"74B5B05EEA583471E03DCBF0123D81CC79CDE0LE8",color:S[10]}}],loading:!1,error:null}),a.push({data:[{data:N,metadata:{viz:"main",name:"clippedmax",id:"74B5B05EEA583471E03DCBF0123D81CC79CDE0FE8",color:S[10]}}],loading:!1,error:null}),a.push({data:[{data:j,metadata:{viz:"main",name:"minmaxarea",id:"74B5B05EEA583471E03DCBF0123D81CC79CDE0FE9",color:"#66666666"}}],loading:!1,error:null}),a.push({data:[{data:z,metadata:{viz:"main",name:"min",id:"625D011FAC794651F25160AD89612DFAAE954C0CB",color:S[11]}}],loading:!1,error:null}),a.push({data:[{data:k,metadata:{viz:"main",name:"max",id:"DDB4E3844C923B3F794EC52642E22CBE9FC8D8D31",color:S[11]}}],loading:!1,error:null})}var k=864e5,P=Date.now()-k,T={tvMode:!1,accountId:y,filters:void 0,timeRange:{begin_time:P-k,duration:null,end_time:1696633199e3}};e.default=function(a){var e=a.nrqlQueries,t=a.alignment,i=C(null),v=Object(r.a)(i,2),g=v[0],_=v[1],R=T;if(I(Object(n.a)(o.a.mark((function t(){var n,r,i,u,l,c,m,s,f,p,h,E,v,g,x,C,I,j,F,Q;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(y=a.nrqlQueries[0].accountId,r=a.nrqlQueries[0].query,i=a.nrqlQueries[0].compare,u=a.nrqlQueries[0].timeseries,q=a.nrqlQueries[0].average,B=a.nrqlQueries[0].minmaxareabol,M=a.nrqlQueries[0].trimmedareabol,O=a.nrqlQueries[0].clippedareabol,A=a.nrqlQueries[0].hideoriginaldata,""!=a.nrqlQueries[0].trimpercent&&(D=a.nrqlQueries[0].trimpercent),""!=a.nrqlQueries[0].clipsize&&(w=a.nrqlQueries[0].clipsize),null!=R.timeRange)if(null==R.timeRange.duration)for(n=(parseInt(R.timeRange.end_time)-parseInt(R.timeRange.begin_time))/1e3,n*=1e3,l=0;l<=i;l++)0==l?(c=parseInt(R.timeRange.end_time-n),m=parseInt(R.timeRange.end_time),s=r+" SINCE "+c+" until "+m+" TIMESERIES "+u,a.nrqlQueries[0].query=s):(f=parseInt(R.timeRange.end_time-n*(l+1)),p=parseInt(R.timeRange.end_time-n*l),h=r+" SINCE "+f+" until "+p+" TIMESERIES "+u,e.push({accountId:y,query:h,color:S[Math.floor(Math.random()*S.length)]}));else for(n=parseInt(R.timeRange.duration)/1e3,E=0;E<=i;E++)v=r+" SINCE "+parseInt(n)*(E+1)+" seconds ago  until "+parseInt(n)*E+" seconds ago TIMESERIES "+u,0==E?a.nrqlQueries[0].query=v:e.push({accountId:y,query:v,color:S[Math.floor(Math.random()*S.length)]});else for(n=1800,g=0;g<=i;g++)x=r+" SINCE "+parseInt(n)*(g+1)+" seconds ago  until "+parseInt(n)*g+" seconds ago TIMESERIES "+u,0==g?a.nrqlQueries[0].query=x:e.push({accountId:y,query:x,color:S[Math.floor(Math.random()*S.length)]});return C=e.map((function(a){return d.NrqlQuery.query({accountIds:[a.accountId],query:a.query,formatTypeenum:d.NrqlQuery.FORMAT_TYPE.CHART})})),t.prev=13,t.next=16,Promise.all(C);case 16:null!=(I=t.sent)[0].error&&(console.log(I[0].error.message),b=I[0].error.message),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(13),console.log(t.t0);case 23:return j=1,I.forEach((function(a){1!=j&&(a.data[0].metadata.name=I[0].data[0].metadata.name+(j-1),a.data[0].metadata.color=S[Math.floor(Math.random()*S.length)]),j++})),z(I),_(I),F=u.includes("second")?1e4:u.includes("minute")?3e4:u.includes("hour")||u.includes("week")?18e5:5e3,Q=setInterval((function(){console.log("Will refresh the data again in ",F),_(I)}),F),t.abrupt("return",(function(){return clearInterval(Q)}));case 30:case"end":return t.stop()}}),t,null,[[13,20]])}))),[a]),null!=b)return x.createElement("div",null,x.createElement(d.Spinner,{inline:!0}),"ERROR: ",b);if(g){var F=t&&""!=t?t:"start",Q=function(a){var e;switch(F){case"middle":var t=parseInt(a.data[0].data.length/2)-1;e=e=a.data[0].data[t].x;break;case"end":e=a.data[0].data[a.data[0].data.length-1].x;break;default:e=a.data[0].data[0].x}return e},k=0;g.forEach((function(a){if(a.data&&a.data[0]&&a.data[0].metadata&&a.data[0].data){var e=Q(a);e>k&&(k=e)}})),g.forEach((function(a){if(a.data&&a.data[0]&&a.data[0].metadata&&a.data[0].data){var e=Q(a),t=k-e;t>0&&a.data[0].data.forEach((function(a){a.x=a.x+t}))}})),function(a){var e=["x","begin_time","end_time"];a.map((function(a){for(var t in a)if("data"==t)for(var n in a[t])for(var r in a[t][n].data)for(var i in a[t][n].data[r])if(e.includes(i)){var o=a[t][n].data[r][i],d=new Date(o).toUTCString().slice(5,-4);a[t][n].data[r][i]=d}}))}(g);var P=[],N=[],K=[],L=[];g.forEach((function(a){a.data&&a.data[0]&&"trimmedarea"!=a.data[0].metadata.name&&"minmaxarea"!=a.data[0].metadata.name&&"clippedarea"!=a.data[0].metadata.name&&N.push(a.data[0])})),g.forEach((function(a){a.data&&a.data[0]&&"min"!=a.data[0].metadata.name&&"max"!=a.data[0].metadata.name&&"trimmedmin"!=a.data[0].metadata.name&&"trimmedmax"!=a.data[0].metadata.name&&"avg"!=a.data[0].metadata.name&&"trimmedarea"!=a.data[0].metadata.name&&"minmaxarea"!=a.data[0].metadata.name&&"clippedarea"!=a.data[0].metadata.name&&"clippedmin"!=a.data[0].metadata.name&&"clippedmax"!=a.data[0].metadata.name&&P.push(a.data[0])})),1==q&&g.forEach((function(a){a.data&&a.data[0]&&"avg"==a.data[0].metadata.name&&K.push(a.data[0])})),1==M&&g.forEach((function(a){a.data&&a.data[0]&&"trimmedarea"==a.data[0].metadata.name&&L.push(a.data[0])})),1==B&&g.forEach((function(a){a.data&&a.data[0]&&"minmaxarea"==a.data[0].metadata.name&&L.push(a.data[0])})),1==O&&g.forEach((function(a){a.data&&a.data[0]&&"clippedarea"==a.data[0].metadata.name&&L.push(a.data[0])})),1==A&&(P=[P[0]]);var J=function(){return g}(),U=x.createElement(x.Fragment,null,x.createElement(E.CSVLink,{filename:"QueryData.csv",data:j(J)},"Download data as CSV"));return x.createElement(d.AutoSizer,null,(function(a){var e=a.width,t=a.height;return x.createElement("div",{style:{height:t,width:e}},x.createElement(u.a,{width:e,height:t,margin:{top:10,right:10,bottom:0,left:0}},x.createElement(l.a,{strokeDasharray:"3 3"}),x.createElement(c.a,{dataKey:"x",type:"category",allowDuplicatedCategory:!1}),x.createElement(m.a,{dataKey:"y",type:"number"}),x.createElement(s.a,null),x.createElement(f.a,null),K.map((function(a){return x.createElement(p.a,{type:"linear",dot:!1,stroke:a.metadata.color,strokeWidth:5,dataKey:"y",data:a.data,name:a.metadata.name,key:a.metadata.name})})),L.map((function(a){return x.createElement(h.a,{type:"monotone",fill:a.metadata.color,dataKey:"y",data:a.data,name:a.metadata.name,strokeWidth:0,key:a.metadata.name})})),P.map((function(a){return x.createElement(p.a,{type:"linear",dot:!1,stroke:a.metadata.color,strokeWidth:2,dataKey:"y",data:a.data,name:a.metadata.name,key:a.metadata.name})}))),x.createElement(d.Grid,null,x.createElement(d.GridItem,{columnSpan:12},U)))}))}return x.createElement("div",{className:"EmptyState"},x.createElement("div",{className:"loader"},x.createElement(d.Spinner,{inline:!0})," Loading and aligning data..."))}}});
//# sourceMappingURL=https://cli-assets.service.datanerd.us/artifact-index-production/5b1dc7dc-8c51-4df3-b7b2-6d024075524d/det/5b1dc7dc-8c51-4df3-b7b2-6d024075524d--multi-timeseries-series~f7e80a37.js.map