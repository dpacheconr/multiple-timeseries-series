var __NR_MODULES="object"==typeof __NR_MODULES?__NR_MODULES:{};__NR_MODULES["5b1dc7dc-8c51-4df3-b7b2-6d024075524d--multi-timeseries-series"]=function(a){function e(e){for(var n,i,d=e[0],u=e[1],l=e[2],m=0,s=[];m<d.length;m++)i=d[m],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&s.push(r[i][0]),r[i]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(a[n]=u[n]);for(c&&c(e);s.length;)s.shift()();return o.push.apply(o,l||[]),t()}function t(){for(var a=0;a<o.length;a++){for(var e=o[a],t=!0,n=1;n<e.length;n++){var i=e[n];0!==r[i]&&(t=!1)}t&&o.splice(a--,1)}}var n={},r={0:0},o=[];function i(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return a[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=a,i.c=n,i.d=function(a,e,t){i.o(a,e)||Object.defineProperty(a,e,{enumerable:!0,get:t})},i.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},i.t=function(a,e){if(1&e&&(a=i(a)),8&e)return a;if(4&e&&"object"==typeof a&&a&&a.__esModule)return a;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:a}),2&e&&"string"!=typeof a)for(var n in a)i.d(t,n,function(e){return a[e]}.bind(null,n));return t},i.n=function(a){var e=a&&a.__esModule?function(){return a.default}:function(){return a};return i.d(e,"a",e),e},i.o=function(a,e){return Object.prototype.hasOwnProperty.call(a,e)},i.p="https://cli-assets.service.datanerd.us/artifact-index-production/5b1dc7dc-8c51-4df3-b7b2-6d024075524d/det/";var d=window["webpackJsonp__5b1dc7dc-8c51-4df3-b7b2-6d024075524d"]=window["webpackJsonp__5b1dc7dc-8c51-4df3-b7b2-6d024075524d"]||[],u=d.push.bind(d);d.push=e,d=d.slice();for(var l=0;l<d.length;l++)e(d[l]);var c=u;o.push(["wfRK",1]),t();var m={__publicPath:function(a){i.p=a},__factory:function(e,t){const n=function(e,t,n,r){var o={};function i(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return a[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}return o[e]={i:e,l:!0,exports:t},o[n]={i:n,l:!0,exports:r},i.m=a,i.c=o,i.d=function(a,e,t){i.o(a,e)||Object.defineProperty(a,e,{enumerable:!0,get:t})},i.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},i.t=function(a,e){if(1&e&&(a=i(a)),8&e)return a;if(4&e&&"object"==typeof a&&a&&a.__esModule)return a;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:a}),2&e&&"string"!=typeof a)for(var n in a)i.d(t,n,function(e){return a[e]}.bind(null,n));return t},i.n=function(a){var e=a&&a.__esModule?function(){return a.default}:function(){return a};return i.d(e,"a",e),e},i.o=function(a,e){return Object.prototype.hasOwnProperty.call(a,e)},i.p="https://cli-assets.service.datanerd.us/artifact-index-production/5b1dc7dc-8c51-4df3-b7b2-6d024075524d/det/",i}("Xznc",e,"evsE",t);return n("wfRK")}};return m}({Xznc:function(a,e){a.exports=function(){throw new Error('Could not initialize "nr1"')}()},evsE:function(a,e){a.exports=function(){throw new Error('Could not initialize "__nr1-internal__"')}()},wfRK:function(a,e,t){"use strict";t.r(e);var n=t("tzJr"),r=t("HCXi"),o=t("2ISw"),i=t.n(o),d=t("Xznc"),u=t("0d+u"),l=t("y9N3"),c=t("J+eN"),m=t("b+jq"),s=t("nJDY"),f=t("Yjvw"),p=t("wcMh"),h=t("BChI"),v=t("HTVX");function g(a,e){var t="undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(!t){if(Array.isArray(a)||(t=function(a,e){if(!a)return;if("string"==typeof a)return E(a,e);var t=Object.prototype.toString.call(a).slice(8,-1);"Object"===t&&a.constructor&&(t=a.constructor.name);if("Map"===t||"Set"===t)return Array.from(a);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return E(a,e)}(a))||e&&a&&"number"==typeof a.length){t&&(a=t);var n=0,r=function(){};return{s:r,n:function(){return n>=a.length?{done:!0}:{done:!1,value:a[n++]}},e:function(a){throw a},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,d=!1;return{s:function(){t=t.call(a)},n:function(){var a=t.next();return i=a.done,a},e:function(a){d=!0,o=a},f:function(){try{i||null==t.return||t.return()}finally{if(d)throw o}}}}function E(a,e){(null==e||e>a.length)&&(e=a.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=a[t];return n}var y,b=t("evsE").injectedPackages.react,_=b.__esModule?b.default:b,x=b.useState,S=b.useEffect,I=["#e6194b","#3cb44b","#000000","#f58231","#911eb4","#f032e6","#bcf60c","#008080","#9a6324","#800000","#808000","#000075","#808080","#000000"],M=10,w=!1,C=!1,D=!1,O=!1;function j(a){var e=[];a.forEach((function(a){a.data.forEach((function(a){e.push(a)}))}));var t=["x","y","begin_time","end_time"],n=[],r=[];return e.map((function(a){for(var e in a)r.includes(e)||(r[0]="x",r[1]="begin_time",r[2]="end_time",r[3]="y",t.includes(e)||(r[r.length]=e))})),e.map((function(a){for(var e={},t=0;t<r.length;t++)e[r[t]]=a[r[t]];n.push(e)})),n.sort((function(a,e){var t=a.x,n=e.x;return t<n?-1:t>n?1:0})),n}function q(a,e,t,n){var r={};return r.begin_time=a.begin_time,r.end_time=a.end_time,r.x=a.x,r.y=t[e],r[n]=t[e],r}function A(a){var e=[];return a.forEach((function(a){e.push(a)})),e}function R(a){for(var e=[],t=[],n=[],r=[],o=[],i=[],d=[],u=[],l=[],c=["min","max","trimmedmin","trimmedmax","avg","trimmedarea","minmaxarea"],m=function(m){a.forEach((function(a){var t=a.data[0].metadata.name;c.includes(t)||e.push(a.data[0].data[m].y)}));var s=[],f=[],p=[],h=[],v=[],E=[],y=[];t.push(e),e=[],t.forEach((function(a){var e,t=1/0,n=-1/0,r=g(a);try{for(r.s();!(e=r.n()).done;){var o=e.value;o<t&&(t=o),o>n&&(n=o)}}catch(a){r.e(a)}finally{r.f()}s.push(function(a){for(var e=0,t=0;t<a.length;t++)e+=a[t];return parseInt(e/a.length)}(a));var i=parseInt(M/100*(n-t)+t),d=parseInt(n-M/100*(n-t));p.push(i),h.push(d),f.push([i,d]),E.push(t),y.push(n),v.push([t,n])}));var b=a[0].data[0].data[m];u.push(q(b,m,s,"avg")),d.push(q(b,m,f,"trimmedarea")),o.push(q(b,m,p,"trimmedmin")),i.push(q(b,m,h,"trimmedmax")),l.push(q(b,m,v,"minmaxarea")),n.push(q(b,m,E,"min")),r.push(q(b,m,y,"max"))},s=0;s<a[0].data[0].data.length;s++)m(s);var f=A(u),p=A(d),h=A(o),v=A(i),E=A(l),y=A(n),b=A(r);a.push({data:[{data:f,metadata:{viz:"main",name:"avg",id:"74B5B05EEA583471E03DCBF0123D81CC79CAE0FE9",color:I[Math.floor(Math.random()*I.length)]}}],loading:!1,error:null}),a.push({data:[{data:p,metadata:{viz:"main",name:"trimmedarea",id:"74B5B05EEA583471E03DCBF0123D81CC79CEE0FE9",color:I[Math.floor(Math.random()*I.length)]}}],loading:!1,error:null}),a.push({data:[{data:h,metadata:{viz:"main",name:"trimmedmin",id:"02D6A84F7B97E4709A11276615FDAAB3EE2BEE415",color:I[Math.floor(Math.random()*I.length)]}}],loading:!1,error:null}),a.push({data:[{data:v,metadata:{viz:"main",name:"trimmedmax",id:"2C1F4F2BAA2800FD80F50C3811F38D03B52DEEEB1",color:I[Math.floor(Math.random()*I.length)]}}],loading:!1,error:null}),a.push({data:[{data:E,metadata:{viz:"main",name:"minmaxarea",id:"74B5B05EEA583471E03DCBF0123D81CC79CDE0FE9",color:I[Math.floor(Math.random()*I.length)]}}],loading:!1,error:null}),a.push({data:[{data:y,metadata:{viz:"main",name:"min",id:"625D011FAC794651F25160AD89612DFAAE954C0CB",color:I[Math.floor(Math.random()*I.length)]}}],loading:!1,error:null}),a.push({data:[{data:b,metadata:{viz:"main",name:"max",id:"DDB4E3844C923B3F794EC52642E22CBE9FC8D8D31",color:I[Math.floor(Math.random()*I.length)]}}],loading:!1,error:null})}var B={tvMode:!1,accountId:3428733,filters:void 0,timeRange:{begin_time:0,duration:36e4,end_time:0}};e.default=function(a){var e=a.nrqlQueries,t=a.alignment,o=x(null),g=Object(r.a)(o,2),E=g[0],b=g[1],q=B;if(S(Object(n.a)(i.a.mark((function t(){var n,r,o,u,l,c,m,s,f,p,h,v,g,E;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=18e5,r=a.nrqlQueries[0].query,o=a.nrqlQueries[0].compare,u=a.nrqlQueries[0].timeseries,w=a.nrqlQueries[0].average,C=a.nrqlQueries[0].minmaxareabol,D=a.nrqlQueries[0].trimmedareabol,O=a.nrqlQueries[0].hideoriginaldata,null!=q.timeRange&&(null==q.timeRange.duration&&(n=(parseInt(q.timeRange.end_time)-parseInt(q.timeRange.begin_time))/1e3),n=parseInt(q.timeRange.duration)/1e3),""!=a.nrqlQueries[0].trimpercent&&(M=a.nrqlQueries[0].trimpercent),null==q.timeRange)for(l=1;l<=o;l++)1==l?(c=r+" SINCE "+parseInt(n)*l+" seconds ago TIMESERIES "+u,a.nrqlQueries[0].query=c):(m=r+" SINCE "+parseInt(n)*l+" seconds ago  until "+parseInt(n)*(l-1)+" seconds ago TIMESERIES "+u,e.push({accountId:3428733,query:m,color:I[l]}));else for(s=1;s<=o;s++)1==s?(f=r+" SINCE "+parseInt(n)*(s+1)+" seconds ago  until "+parseInt(n)+" seconds ago TIMESERIES "+u,a.nrqlQueries[0].query=f):(p=r+" SINCE "+parseInt(n)*(s+1)+" seconds ago  until "+parseInt(n)*s+" seconds ago TIMESERIES "+u,e.push({accountId:3428733,query:p,color:I[s]}));return h=e.map((function(a){return d.NrqlQuery.query({accountIds:[a.accountId],query:a.query,formatTypeenum:d.NrqlQuery.FORMAT_TYPE.CHART})})),t.prev=12,t.next=15,Promise.all(h);case 15:null!=(v=t.sent)[0].error&&(console.log(v[0].error.message),y=v[0].error.message),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(12),console.log(t.t0);case 22:return R(v),b(v),g=u.includes("second")?1e4:u.includes("minute")?3e4:u.includes("hour")||u.includes("week")?18e5:5e3,E=setInterval((function(){console.log("Will refresh the data again in ",g),b(v)}),g),t.abrupt("return",(function(){return clearInterval(E)}));case 27:case"end":return t.stop()}}),t,null,[[12,19]])}))),[a]),null!=y)return _.createElement("div",null,_.createElement(d.Spinner,{inline:!0}),"ERROR: ",y);if(E){var A=t&&""!=t?t:"start",F=function(a){var e;switch(A){case"middle":var t=parseInt(a.data[0].data.length/2)-1;e=e=a.data[0].data[t].x;break;case"end":e=a.data[0].data[a.data[0].data.length-1].x;break;default:e=a.data[0].data[0].x}return e},k=0;E.forEach((function(a){if(a.data&&a.data[0]&&a.data[0].metadata&&a.data[0].data){var e=F(a);e>k&&(k=e)}})),E.forEach((function(a){if(a.data&&a.data[0]&&a.data[0].metadata&&a.data[0].data){var e=F(a),t=k-e;t>0&&a.data[0].data.forEach((function(a){a.x=a.x+t}))}})),function(a){var e=["x","begin_time","end_time"];a.map((function(a){for(var t in a)if("data"==t)for(var n in a[t])for(var r in a[t][n].data)for(var o in a[t][n].data[r])if(e.includes(o)){var i=a[t][n].data[r][o],d=new Date(i).toUTCString().slice(5,-4);a[t][n].data[r][o]=d}}))}(E);var P=[],Q=[],T=[],z=[];E.forEach((function(a){a.data&&a.data[0]&&"trimmedarea"!=a.data[0].metadata.name&&"minmaxarea"!=a.data[0].metadata.name&&Q.push(a.data[0])})),E.forEach((function(a){a.data&&a.data[0]&&"min"!=a.data[0].metadata.name&&"max"!=a.data[0].metadata.name&&"trimmedmin"!=a.data[0].metadata.name&&"trimmedmax"!=a.data[0].metadata.name&&"avg"!=a.data[0].metadata.name&&"trimmedarea"!=a.data[0].metadata.name&&"minmaxarea"!=a.data[0].metadata.name&&P.push(a.data[0])})),1==w&&E.forEach((function(a){a.data&&a.data[0]&&"avg"==a.data[0].metadata.name&&T.push(a.data[0])})),1==D&&E.forEach((function(a){a.data&&a.data[0]&&"trimmedarea"==a.data[0].metadata.name&&z.push(a.data[0])})),1==C&&E.forEach((function(a){a.data&&a.data[0]&&"minmaxarea"==a.data[0].metadata.name&&z.push(a.data[0])})),1==O&&(P=[]);var N=_.createElement(_.Fragment,null,_.createElement(v.CSVLink,{filename:"QueryData.csv",data:j(Q)},"Download data as CSV"));return _.createElement(d.AutoSizer,null,(function(a){var e=a.width,t=a.height;return _.createElement("div",{style:{height:t,width:e}},_.createElement(u.a,{width:e-15,height:t-15,margin:{top:10,right:10,bottom:0,left:0}},_.createElement(l.a,{strokeDasharray:"3 3"}),_.createElement(c.a,{dataKey:"x",type:"category",allowDuplicatedCategory:!1}),_.createElement(m.a,{dataKey:"y",type:"number",domain:["datamin - 10","dataMax + 10"]}),_.createElement(s.a,null),_.createElement(f.a,null),P.map((function(a){return _.createElement(p.a,{type:"linear",dot:!1,stroke:a.metadata.color,strokeWidth:2,dataKey:"y",data:a.data,name:a.metadata.name,key:a.metadata.name})})),T.map((function(a){return _.createElement(p.a,{type:"linear",dot:!1,stroke:a.metadata.color,strokeWidth:5,dataKey:"y",data:a.data,name:a.metadata.name,key:a.metadata.name})})),z.map((function(a){return _.createElement(h.a,{type:"monotone",fill:a.metadata.color,dataKey:"y",data:a.data,name:a.metadata.name,strokeWidth:0,key:a.metadata.name})}))),_.createElement(d.Grid,null,_.createElement(d.GridItem,{columnSpan:12},N)))}))}return _.createElement("div",{className:"EmptyState"},_.createElement("div",{className:"loader"},_.createElement(d.Spinner,{inline:!0})," Loading and aligning data..."))}}});
//# sourceMappingURL=https://cli-assets.service.datanerd.us/artifact-index-production/5b1dc7dc-8c51-4df3-b7b2-6d024075524d/det/5b1dc7dc-8c51-4df3-b7b2-6d024075524d--multi-timeseries-series~ab3f528d.js.map