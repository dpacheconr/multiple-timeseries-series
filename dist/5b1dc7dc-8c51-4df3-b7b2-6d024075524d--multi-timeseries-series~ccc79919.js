var __NR_MODULES="object"==typeof __NR_MODULES?__NR_MODULES:{};__NR_MODULES["5b1dc7dc-8c51-4df3-b7b2-6d024075524d--multi-timeseries-series"]=function(a){function e(e){for(var n,i,d=e[0],u=e[1],l=e[2],m=0,s=[];m<d.length;m++)i=d[m],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&s.push(r[i][0]),r[i]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(a[n]=u[n]);for(c&&c(e);s.length;)s.shift()();return o.push.apply(o,l||[]),t()}function t(){for(var a=0;a<o.length;a++){for(var e=o[a],t=!0,n=1;n<e.length;n++){var i=e[n];0!==r[i]&&(t=!1)}t&&o.splice(a--,1)}}var n={},r={0:0},o=[];function i(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return a[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=a,i.c=n,i.d=function(a,e,t){i.o(a,e)||Object.defineProperty(a,e,{enumerable:!0,get:t})},i.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},i.t=function(a,e){if(1&e&&(a=i(a)),8&e)return a;if(4&e&&"object"==typeof a&&a&&a.__esModule)return a;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:a}),2&e&&"string"!=typeof a)for(var n in a)i.d(t,n,function(e){return a[e]}.bind(null,n));return t},i.n=function(a){var e=a&&a.__esModule?function(){return a.default}:function(){return a};return i.d(e,"a",e),e},i.o=function(a,e){return Object.prototype.hasOwnProperty.call(a,e)},i.p="https://cli-assets.service.datanerd.us/artifact-index-production/5b1dc7dc-8c51-4df3-b7b2-6d024075524d/det/";var d=window["webpackJsonp__5b1dc7dc-8c51-4df3-b7b2-6d024075524d"]=window["webpackJsonp__5b1dc7dc-8c51-4df3-b7b2-6d024075524d"]||[],u=d.push.bind(d);d.push=e,d=d.slice();for(var l=0;l<d.length;l++)e(d[l]);var c=u;o.push(["wfRK",1]),t();var m={__publicPath:function(a){i.p=a},__factory:function(e,t){const n=function(e,t,n,r){var o={};function i(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return a[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}return o[e]={i:e,l:!0,exports:t},o[n]={i:n,l:!0,exports:r},i.m=a,i.c=o,i.d=function(a,e,t){i.o(a,e)||Object.defineProperty(a,e,{enumerable:!0,get:t})},i.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},i.t=function(a,e){if(1&e&&(a=i(a)),8&e)return a;if(4&e&&"object"==typeof a&&a&&a.__esModule)return a;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:a}),2&e&&"string"!=typeof a)for(var n in a)i.d(t,n,function(e){return a[e]}.bind(null,n));return t},i.n=function(a){var e=a&&a.__esModule?function(){return a.default}:function(){return a};return i.d(e,"a",e),e},i.o=function(a,e){return Object.prototype.hasOwnProperty.call(a,e)},i.p="https://cli-assets.service.datanerd.us/artifact-index-production/5b1dc7dc-8c51-4df3-b7b2-6d024075524d/det/",i}("Xznc",e,"evsE",t);return n("wfRK")}};return m}({Xznc:function(a,e){a.exports=function(){throw new Error('Could not initialize "nr1"')}()},evsE:function(a,e){a.exports=function(){throw new Error('Could not initialize "__nr1-internal__"')}()},wfRK:function(a,e,t){"use strict";t.r(e);var n=t("tzJr"),r=t("HCXi"),o=t("2ISw"),i=t.n(o),d=t("Xznc"),u=t("0d+u"),l=t("y9N3"),c=t("J+eN"),m=t("b+jq"),s=t("nJDY"),f=t("Yjvw"),p=t("wcMh"),h=t("BChI"),v=t("HTVX");function E(a,e){var t="undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(!t){if(Array.isArray(a)||(t=function(a,e){if(!a)return;if("string"==typeof a)return g(a,e);var t=Object.prototype.toString.call(a).slice(8,-1);"Object"===t&&a.constructor&&(t=a.constructor.name);if("Map"===t||"Set"===t)return Array.from(a);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return g(a,e)}(a))||e&&a&&"number"==typeof a.length){t&&(a=t);var n=0,r=function(){};return{s:r,n:function(){return n>=a.length?{done:!0}:{done:!1,value:a[n++]}},e:function(a){throw a},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,d=!1;return{s:function(){t=t.call(a)},n:function(){var a=t.next();return i=a.done,a},e:function(a){d=!0,o=a},f:function(){try{i||null==t.return||t.return()}finally{if(d)throw o}}}}function g(a,e){(null==e||e>a.length)&&(e=a.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=a[t];return n}var y,b,_=t("evsE").injectedPackages.react,x=_.__esModule?_.default:_,C=_.useState,S=_.useEffect,w=_.useContext,I=["#e6194b","#3cb44b","#000000","#f58231","#911eb4","#f032e6","#bcf60c","#008080","#9a6324","#800000","#808000","#000075","#808080","#000000"],D=10,O=1,q=!1,M=!1,R=!1,j=!1,A=!1;function B(a){var e,t=1/0,n=-1/0,r=E(a);try{for(r.s();!(e=r.n()).done;){var o=e.value;o<t&&(t=o),o>n&&(n=o)}}catch(a){r.e(a)}finally{r.f()}return[t,n]}function F(a){var e=[];a.forEach((function(a){a.data.forEach((function(a){e.push(a)}))}));var t=["x","y","begin_time","end_time"],n=[],r=[];return e.map((function(a){for(var e in a)r.includes(e)||(r[0]="x",r[1]="begin_time",r[2]="end_time",r[3]="y",t.includes(e)||(r[r.length]=e))})),e.map((function(a){for(var e={},t=0;t<r.length;t++)e[r[t]]=a[r[t]];n.push(e)})),n.sort((function(a,e){var t=a.x,n=e.x;return t<n?-1:t>n?1:0})),n}function Q(a,e,t,n){var r={};return r.begin_time=a.begin_time,r.end_time=a.end_time,r.x=a.x,r.y=t[e],r[n]=t[e],r}function k(a){var e=[];return a.forEach((function(a){e.push(a)})),e}function z(a){for(var e=[],t=[],n=[],r=[],o=[],i=[],d=[],u=[],l=[],c=function(t){var n=[];a.forEach((function(a,e){e>0&&n.push(a.data[0].data[t].y)})),e.push(n)},m=0;m<a[0].data[0].data.length;m++)c(m);var s=[],f=[],p=[],h=[],v=[],E=[],g=[],y=[];e.forEach((function(a){var e=B(a),t=e[0],n=e[1];s.push(function(a){for(var e=0,t=0;t<a.length;t++)e+=a[t];return parseInt(e/a.length)}(a));var r=parseInt(D/100*(n-t)+t),o=parseInt(n-D/100*(n-t));p.push(r),h.push(o),f.push([r,o]),E.push(t),g.push(n),v.push([t,n]);var i=function(a,e){var t=a.sort((function(a,e){return a-e}));return t.slice(e,t.length-e)}(a,parseInt(O));y.push(B(i))}));for(var b=0;b<a[0].data[0].data.length;b++){var _=a[0].data[0].data[b];u.push(Q(_,b,s,"avg")),i.push(Q(_,b,f,"trimmedarea")),r.push(Q(_,b,p,"trimmedmin")),o.push(Q(_,b,h,"trimmedmax")),l.push(Q(_,b,v,"minmaxarea")),t.push(Q(_,b,E,"min")),n.push(Q(_,b,g,"max")),d.push(Q(_,b,y,"clippedarea"))}var x=k(u),C=k(i),S=k(r),w=k(o),q=k(l),M=k(t),R=k(n),j=k(d);a.push({data:[{data:x,metadata:{viz:"main",name:"avg",id:"74B5B05EEA583471E03DCBF0123D81CC79CAE0FE9",color:I[1]}}],loading:!1,error:null}),a.push({data:[{data:C,metadata:{viz:"main",name:"trimmedarea",id:"74B5B05EEA583471E03DCBF0123D81CC79CEE0FE9",color:I[1]}}],loading:!1,error:null}),a.push({data:[{data:S,metadata:{viz:"main",name:"trimmedmin",id:"02D6A84F7B97E4709A11276615FDAAB3EE2BEE415",color:I[2]}}],loading:!1,error:null}),a.push({data:[{data:w,metadata:{viz:"main",name:"trimmedmax",id:"2C1F4F2BAA2800FD80F50C3811F38D03B52DEEEB1",color:I[2]}}],loading:!1,error:null}),a.push({data:[{data:q,metadata:{viz:"main",name:"minmaxarea",id:"74B5B05EEA583471E03DCBF0123D81CC79CDE0FE9",color:I[9]}}],loading:!1,error:null}),a.push({data:[{data:j,metadata:{viz:"main",name:"clippedarea",id:"74B5B05EEA583471E03DCBF0123D81CC79CDE0FE8",color:I[10]}}],loading:!1,error:null}),a.push({data:[{data:M,metadata:{viz:"main",name:"min",id:"625D011FAC794651F25160AD89612DFAAE954C0CB",color:I[11]}}],loading:!1,error:null}),a.push({data:[{data:R,metadata:{viz:"main",name:"max",id:"DDB4E3844C923B3F794EC52642E22CBE9FC8D8D31",color:I[12]}}],loading:!1,error:null})}var P=36e5,T=Date.now()-P,N={tvMode:!1,accountId:y,filters:void 0,timeRange:{begin_time:T-72e5,duration:null,end_time:T}};e.default=function(a){var e,t=a.nrqlQueries,o=a.alignment,E=C(null),g=Object(r.a)(E,2),_=g[0],B=g[1];try{e=w(d.PlatformStateContext),console.log("unable to obtain ctx",e)}catch(a){console.log(a),e=N}if(console.log("running ctx is ",e),S(Object(n.a)(i.a.mark((function n(){var r,o,u,l,c,m,s,f,p,h,v,E,g,_,x,C;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=18e4,y=a.nrqlQueries[0].accountId,o=a.nrqlQueries[0].query,u=a.nrqlQueries[0].compare,l=a.nrqlQueries[0].timeseries,q=a.nrqlQueries[0].average,M=a.nrqlQueries[0].minmaxareabol,R=a.nrqlQueries[0].trimmedareabol,j=a.nrqlQueries[0].clippedareabol,A=a.nrqlQueries[0].hideoriginaldata,null!=e.timeRange&&(r=null==e.timeRange.duration?(parseInt(e.timeRange.end_time)-parseInt(e.timeRange.begin_time))/1e3:parseInt(e.timeRange.duration)/1e3),""!=a.nrqlQueries[0].trimpercent&&(D=a.nrqlQueries[0].trimpercent),""!=a.nrqlQueries[0].clipsize&&(O=a.nrqlQueries[0].clipsize),null==e.timeRange.duration)for(r*=1e3,c=0;c<=u;c++)0==c?(m=parseInt(e.timeRange.end_time-r),s=parseInt(e.timeRange.end_time),f=o+" SINCE "+m+" until "+s+" TIMESERIES "+l,a.nrqlQueries[0].query=f):(p=parseInt(e.timeRange.end_time-r*(c+1)),h=parseInt(e.timeRange.end_time-r*c),v=o+" SINCE "+p+" until "+h+" TIMESERIES "+l,t.push({accountId:y,query:v,color:I[Math.floor(Math.random()*I.length)]}));else for(E=0;E<=u;E++)g=o+" SINCE "+parseInt(r)*(E+1)+" seconds ago  until "+parseInt(r)*E+" seconds ago TIMESERIES "+l,0==E?a.nrqlQueries[0].query=g:t.push({accountId:y,query:g,color:I[Math.floor(Math.random()*I.length)]});return _=t.map((function(a){return d.NrqlQuery.query({accountIds:[a.accountId],query:a.query,formatTypeenum:d.NrqlQuery.FORMAT_TYPE.CHART})})),n.prev=15,n.next=18,Promise.all(_);case 18:null!=(x=n.sent)[0].error&&(console.log(x[0].error.message),b=x[0].error.message),n.next=25;break;case 22:n.prev=22,n.t0=n.catch(15),console.log(n.t0);case 25:console.log(x),C=1,x.forEach((function(a){1!=C&&(a.data[0].metadata.name=x[0].data[0].metadata.name+(C-1),a.data[0].metadata.color=I[Math.floor(Math.random()*I.length)]),C++})),z(x),B(x);case 30:case"end":return n.stop()}}),n,null,[[15,22]])}))),[a]),null!=b)return x.createElement("div",null,x.createElement(d.Spinner,{inline:!0}),"ERROR: ",b);if(_){var Q=o&&""!=o?o:"start",k=function(a){var e;switch(Q){case"middle":var t=parseInt(a.data[0].data.length/2)-1;e=e=a.data[0].data[t].x;break;case"end":e=a.data[0].data[a.data[0].data.length-1].x;break;default:e=a.data[0].data[0].x}return e},P=0;_.forEach((function(a){if(a.data&&a.data[0]&&a.data[0].metadata&&a.data[0].data){var e=k(a);e>P&&(P=e)}})),_.forEach((function(a){if(a.data&&a.data[0]&&a.data[0].metadata&&a.data[0].data){var e=k(a),t=P-e;t>0&&a.data[0].data.forEach((function(a){a.x=a.x+t}))}})),function(a){var e=["x","begin_time","end_time"];a.map((function(a){for(var t in a)if("data"==t)for(var n in a[t])for(var r in a[t][n].data)for(var o in a[t][n].data[r])if(e.includes(o)){var i=a[t][n].data[r][o],d=new Date(i).toUTCString().slice(5,-4);a[t][n].data[r][o]=d}}))}(_);var T=[],K=[],L=[],U=[];_.forEach((function(a){a.data&&a.data[0]&&"trimmedarea"!=a.data[0].metadata.name&&"minmaxarea"!=a.data[0].metadata.name&&"clippedarea"!=a.data[0].metadata.name&&K.push(a.data[0])})),_.forEach((function(a){a.data&&a.data[0]&&"min"!=a.data[0].metadata.name&&"max"!=a.data[0].metadata.name&&"trimmedmin"!=a.data[0].metadata.name&&"trimmedmax"!=a.data[0].metadata.name&&"avg"!=a.data[0].metadata.name&&"trimmedarea"!=a.data[0].metadata.name&&"minmaxarea"!=a.data[0].metadata.name&&"clippedarea"!=a.data[0].metadata.name&&T.push(a.data[0])})),1==q&&_.forEach((function(a){a.data&&a.data[0]&&"avg"==a.data[0].metadata.name&&L.push(a.data[0])})),1==R&&_.forEach((function(a){a.data&&a.data[0]&&"trimmedarea"==a.data[0].metadata.name&&U.push(a.data[0])})),1==M&&_.forEach((function(a){a.data&&a.data[0]&&"minmaxarea"==a.data[0].metadata.name&&U.push(a.data[0])})),1==j&&_.forEach((function(a){a.data&&a.data[0]&&"clippedarea"==a.data[0].metadata.name&&U.push(a.data[0])})),1==A&&(T=[T[0]]);var J=x.createElement(x.Fragment,null,x.createElement(v.CSVLink,{filename:"QueryData.csv",data:F(K)},"Download data as CSV"));return x.createElement(d.AutoSizer,null,(function(a){var e=a.width,t=a.height;return x.createElement("div",{style:{height:t,width:e}},x.createElement(u.a,{width:e-15,height:t-15,margin:{top:10,right:10,bottom:0,left:0}},x.createElement(l.a,{strokeDasharray:"3 3"}),x.createElement(c.a,{dataKey:"x",type:"category",allowDuplicatedCategory:!1}),x.createElement(m.a,{dataKey:"y",type:"number",domain:["datamin - 10","dataMax + 10"]}),x.createElement(s.a,null),x.createElement(f.a,null),T.map((function(a){return x.createElement(p.a,{type:"linear",dot:!1,stroke:a.metadata.color,strokeWidth:2,dataKey:"y",data:a.data,name:a.metadata.name,key:a.metadata.name})})),L.map((function(a){return x.createElement(p.a,{type:"linear",dot:!1,stroke:a.metadata.color,strokeWidth:5,dataKey:"y",data:a.data,name:a.metadata.name,key:a.metadata.name})})),U.map((function(a){return x.createElement(h.a,{type:"monotone",fill:a.metadata.color,dataKey:"y",data:a.data,name:a.metadata.name,strokeWidth:0,key:a.metadata.name})}))),x.createElement(d.Grid,null,x.createElement(d.GridItem,{columnSpan:12},J)))}))}return x.createElement("div",{className:"EmptyState"},x.createElement("div",{className:"loader"},x.createElement(d.Spinner,{inline:!0})," Loading and aligning data..."))}}});
//# sourceMappingURL=https://cli-assets.service.datanerd.us/artifact-index-production/5b1dc7dc-8c51-4df3-b7b2-6d024075524d/det/5b1dc7dc-8c51-4df3-b7b2-6d024075524d--multi-timeseries-series~ccc79919.js.map