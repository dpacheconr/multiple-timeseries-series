{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"(function() { throw new Error(\\\"Could not initialize \\\\\\\"nr1\\\\\\\"\\\"); })()\"","webpack:///external \"(function() { throw new Error(\\\"Could not initialize \\\\\\\"__nr1-internal__\\\\\\\"\\\"); })()\"","webpack:///./visualizations/multi-timeseries-series/index.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","deferredModule","fulfilled","j","depId","splice","installedModules","__webpack_require__","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","__publicPath","publicPath","__factory","nr1Module","nr1InternalModule","requireFn","nr1ModuleId","nr1InternalModuleId","__webpack_require_factory__","Error","c_accountid","globalerror","defaultColors","trimpercent","clipSize","avgbol","minmaxareabol","trimmedareabol","clippedareabol","hideoriginaldata","getMinMax","minValue","Infinity","maxValue","item","exportToCsv","newdata","forEach","el","subel","keys","sorteddata","sorted","map","includes","tempDict","sort","a","b","keyA","x","keyB","build_json","z","array","datatopass","begin_time","end_time","y","parse_data","sets","calculatedata","resultarray","minmaxminsctrl","minmaxmaxsctrl","trimmedminctrl","trimmedmaxctrl","trimmedareactrl","clippedareactrl","avgarrctrl","minmaxareactrl","ctrlarray","idx","avgarr","trimmedarea","trimmedmin","trimmedmax","minmaxarea","minmaxmins","minmaxmaxs","clippedarea","yvalues","minMax","sum","parseInt","avgfunction","mins","maxs","clippedData","dataArray","size","clipFunction","avgset","trimmedareaset","trimmedminset","trimmedmaxset","minmaxareaset","minset","maxset","clippedareaset","loading","error","duration","enddate","Date","now","ctx","tvMode","accountId","filters","undefined","timeRange","AlignedTimeseries","props","cplatformstatecontext","nrqlQueries","alignment","useState","queryResults","setQueryResults","useContext","PlatformStateContext","console","log","e","useEffect","windowsize","mainquery","query","compare","timeseries","average","clipsize","from","until","color","Math","floor","random","promises","q","NrqlQuery","accountIds","formatTypeenum","FORMAT_TYPE","CHART","Promise","all","message","count","metadata","inline","seriesAlignment","determineComparisonPoint","comparisonPoint","midpoint","latest","offset","row","s","subitem","time","toUTCString","unixtodatetime","vizchartData","exportchartData","linechartdata","arechartdata","outTable","filename","width","height","style","margin","top","right","bottom","left","strokeDasharray","dataKey","type","allowDuplicatedCategory","domain","dot","stroke","strokeWidth","fill","columnSpan","className"],"mappings":"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","file":"5b1dc7dc-8c51-4df3-b7b2-6d024075524d--multi-timeseries-series~ccc79919.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n \t/*** START WEBPACK REQUIRE CACHE FACTORY ***/\n \t function __webpack_require_factory__(nr1ModuleId, nr1Module, nr1InternalModuleId, nr1InternalModule) {\n \t    // The module cache.\n \t    var installedModules = {};\n \t     // Create the NR1 module and put it in the cache.\n \t    installedModules[nr1ModuleId] = {\n \t        i: nr1ModuleId,\n \t        l: true,\n \t        exports: nr1Module\n \t    };\n \t     // Create the NR1 internal module and put it in the cache.\n \t    installedModules[nr1InternalModuleId] = {\n \t        i: nr1InternalModuleId,\n \t        l: true,\n \t        exports: nr1InternalModule\n \t    };\n \t     // The require function.\n \t    function __webpack_require__(moduleId) {\n \t        \n \t// Check if module is in cache\n \tif(installedModules[moduleId]) {\n \t\treturn installedModules[moduleId].exports;\n \t}\n \t// Create a new module (and put it into the cache)\n \tvar module = installedModules[moduleId] = {\n \t\ti: moduleId,\n \t\tl: false,\n \t\texports: {}\n \t};\n\n \t// Execute the module function\n \tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t// Flag the module as loaded\n \tmodule.l = true;\n\n \t// Return the exports of the module\n \treturn module.exports;\n \t    }\n \t     // Require extensions.\n \t    \n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"https://cli-assets.service.datanerd.us/artifact-index-production/5b1dc7dc-8c51-4df3-b7b2-6d024075524d/det/\";;\n \t     return __webpack_require__;\n \t}\n \t /*** END WEBPACK REQUIRE CACHE FACTORY ***/\n \t \n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"https://cli-assets.service.datanerd.us/artifact-index-production/5b1dc7dc-8c51-4df3-b7b2-6d024075524d/det/\";\n\n \tvar jsonpArray = window[\"webpackJsonp__5b1dc7dc-8c51-4df3-b7b2-6d024075524d\"] = window[\"webpackJsonp__5b1dc7dc-8c51-4df3-b7b2-6d024075524d\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([\"wfRK\",1]);\n \t// run deferred modules when ready\n \tcheckDeferredModules();\n \t /*** START CUSTOM FACTORY EXPOSURE ***/\n \t var ns = {\n \t    __publicPath: function (publicPath) {\n \t        __webpack_require__.p = publicPath;\n \t    },\n \t     __factory: function (nr1Module, nr1InternalModule) {\n \t        const nr1ModuleId = \"Xznc\";\n \t        const nr1InternalModuleId = \"evsE\";\n \t        const requireFn = __webpack_require_factory__(nr1ModuleId, nr1Module, nr1InternalModuleId, nr1InternalModule);\n \t         return requireFn(\"wfRK\");\n \t    }\n \t};\n \t return ns;\n \t /*** END CUSTOM FACTORY EXPOSURE ***/\n","module.exports = (function() { throw new Error(\"Could not initialize \\\"nr1\\\"\"); })();","module.exports = (function() { throw new Error(\"Could not initialize \\\"__nr1-internal__\\\"\"); })();","/* eslint-disable react/prop-types */\n\nimport React, { useState, useEffect, useContext} from 'react';\nimport {NrqlQuery, Spinner,Grid,GridItem,AutoSizer,PlatformStateContext} from 'nr1';\nimport { Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ComposedChart,Area} from 'recharts';\nimport { CSVLink } from \"react-csv\"\n\n\n// Global variables\nconst defaultColors=['#e6194b', '#3cb44b', '#000000', '#f58231', '#911eb4', '#f032e6', '#bcf60c', '#008080', '#9a6324', '#800000', '#808000', '#000075', '#808080', '#000000']\nlet c_accountid\nlet trimpercent = 10\nlet clipSize=1\nlet avgbol = false\nlet minmaxareabol = false\nlet trimmedareabol = false\nlet clippedareabol = false\nlet hideoriginaldata = false\nlet globalerror\n\n\nfunction avgfunction (array) {\n    let sum = 0;\n    for (let i = 0; i < array.length; i++) {\n        sum += array[i];\n    }\n    return parseInt(sum / array.length)\n}\n\nfunction clipFunction (dataArray,size) {\n    let sorted = dataArray.sort(function(a, b){return a - b});\n    let clipped=sorted.slice(size,sorted.length-size)\n    return clipped\n}\n\nfunction getMinMax(data) {\n    let minValue = Infinity;\n    let maxValue = -Infinity;\n    for (let item of data) {\n        // Find minimum value\n        if (item < minValue)\n            minValue = item;\n\n        // Find maximum value\n        if (item > maxValue)\n            maxValue = item;                \n    } \n    return [minValue,maxValue]\n}\n\nfunction unixtodatetime(data) {\n    let keys = [\"x\",\"begin_time\",\"end_time\"]\n    data.map((s) => {\n        for (let item in s){\n            if (item == \"data\"){\n                for (let subitem in s[item]) {\n                    for (let i in s[item][subitem].data){\n                        for (let j in s[item][subitem].data[i]){\n                            if (keys.includes(j)){\n                                let value = s[item][subitem].data[i][j]\n                                let dateObj = new Date(value);\n                                let utcString = dateObj.toUTCString();\n                                let time = utcString.slice(5,-4);\n                                s[item][subitem].data[i][j] = time\n                            }\n                        }\n\n                    }\n                }\n                    \n                }\n            }\n\n    })\n}\n \nfunction exportToCsv (data){\n    let newdata = []\n\n    data.forEach(el => {\n        el.data.forEach(subel => {\n            newdata.push(subel)\n        })\n    })\n\n    let keys = [\"x\",\"y\",\"begin_time\",\"end_time\"]\n    let sorteddata=[]\n    var sorted = [];\n    newdata.map(el => {\n        for(var key in el) {\n            if (!sorted.includes(key)){\n                sorted[0] = \"x\";\n                sorted[1] = \"begin_time\";\n                sorted[2] = \"end_time\";\n                sorted[3] = \"y\";\n                if (!keys.includes(key)){\n                   sorted[sorted.length] = key\n            }}}\n\n    })  \n    newdata.map(el => {\n        var tempDict = {};\n        for(var i = 0; i < sorted.length; i++) {\n            tempDict[sorted[i]] = el[sorted[i]];\n        }\n        sorteddata.push(tempDict)\n    })\n    sorteddata.sort(function(a, b) {\n        var keyA = a.x,\n          keyB = b.x;\n        // Compare the 2\n        if (keyA < keyB) return -1;\n        if (keyA > keyB) return 1;\n        return 0;\n      });\n\n    return sorteddata\n  }\n\n\nfunction build_json(z,i,array,value) {\n    let datatopass={}\n    datatopass.begin_time=z.begin_time\n    datatopass.end_time=z.end_time\n    datatopass.x=z.x\n    datatopass.y=array[i]\n    datatopass[value]=array[i]\n    return datatopass\n}\n\n\nfunction parse_data(array) {\n    let sets = []\n    array.forEach(el => {\n        sets.push(el)\n    })\n    return sets\n}\n\nfunction parse_time_string(data){\n    let dateObj = new Date(data);\n    let utcString = dateObj.toUTCString();\n    let time = utcString.slice(5,-4);\n    return time\n}\nfunction calculatedata(data) {\n   \n    let resultarray = []\n\n    let minmaxminsctrl = []\n    let minmaxmaxsctrl = []\n    let trimmedminctrl = []\n    let trimmedmaxctrl = []\n    let trimmedareactrl = []\n    let clippedareactrl = []\n    let avgarrctrl = []\n    let minmaxareactrl=[]\n\n\n    for (let i = 0; i < data[0].data[0].data.length; i++) {     //iterate over each bucket, using the first series as control\n        let ctrlarray = [] //this is the y values for the current i'th bucket \n        data.forEach((z,idx)=>{\n            if (idx > 0) { //we dont want to include the most recent series in the data\n                ctrlarray.push(z.data[0].data[i].y)\n             }  \n        })\n        resultarray.push(ctrlarray)\n    } \n\n    let avgarr =  []\n\n    let trimmedarea = []\n    let trimmedmin= []\n    let trimmedmax= []\n\n    let minmaxarea= []\n    let minmaxmins = []\n    let minmaxmaxs = []\n\n    let clippedarea = []\n\n\n\n        resultarray.forEach((yvalues) => {\n\n            let minMax = getMinMax(yvalues)\n            let minValue = minMax[0]\n            let maxValue =  minMax[1]\n\n                avgarr.push(avgfunction(yvalues))\n\n                let mins = parseInt(((maxValue - minValue)*(trimpercent/100))+minValue)\n                let maxs = parseInt(maxValue - ((maxValue - minValue)*(trimpercent/100)))\n    \n    \n                trimmedmin.push(mins)\n                trimmedmax.push(maxs)\n                trimmedarea.push([mins,maxs])\n    \n                minmaxmins.push(minValue)\n                minmaxmaxs.push(maxValue)\n                minmaxarea.push([minValue,maxValue])       \n\n\n                //determine clipped area\n                let clippedData=clipFunction(yvalues,parseInt(clipSize))\n                clippedarea.push(getMinMax(clippedData))\n\n        })\n\n        for (let i = 0; i < data[0].data[0].data.length; i++) {  \n            let z = data[0].data[0].data[i]\n\n            avgarrctrl.push(build_json(z,i,avgarr,\"avg\"))\n\n            trimmedareactrl.push(build_json(z,i,trimmedarea,\"trimmedarea\"))\n            trimmedminctrl.push(build_json(z,i,trimmedmin,\"trimmedmin\"))\n            trimmedmaxctrl.push(build_json(z,i,trimmedmax,\"trimmedmax\"))\n\n            minmaxareactrl.push(build_json(z,i,minmaxarea,\"minmaxarea\"))\n            minmaxminsctrl.push(build_json(z,i,minmaxmins,\"min\"))\n            minmaxmaxsctrl.push(build_json(z,i,minmaxmaxs,\"max\"))\n\n            clippedareactrl.push(build_json(z,i,clippedarea,\"clippedarea\"))\n\n        }\n\n    let avgset = parse_data (avgarrctrl)\n    let trimmedareaset = parse_data (trimmedareactrl)\n    let trimmedminset = parse_data (trimmedminctrl)\n    let trimmedmaxset = parse_data (trimmedmaxctrl)\n    let minmaxareaset = parse_data (minmaxareactrl)\n    let minset = parse_data (minmaxminsctrl)\n    let maxset = parse_data (minmaxmaxsctrl)\n    let clippedareaset = parse_data(clippedareactrl)\n\n\n\n    // update queries with calculated data\n    data.push({\"data\":[{\"data\":avgset, \"metadata\":{\"viz\":\"main\",\"name\": \"avg\",\"id\":\"74B5B05EEA583471E03DCBF0123D81CC79CAE0FE9\", \"color\": defaultColors[1]}}],loading: false, error: null})\n    data.push({\"data\":[{\"data\":trimmedareaset, \"metadata\":{\"viz\":\"main\",\"name\": \"trimmedarea\",\"id\":\"74B5B05EEA583471E03DCBF0123D81CC79CEE0FE9\", \"color\":defaultColors[1]}}],loading: false, error: null})\n    data.push({\"data\":[{\"data\":trimmedminset, \"metadata\":{\"viz\":\"main\",\"name\": \"trimmedmin\",\"id\":\"02D6A84F7B97E4709A11276615FDAAB3EE2BEE415\", \"color\": defaultColors[2]}}],loading: false, error: null})\n    data.push({\"data\":[{\"data\":trimmedmaxset, \"metadata\":{\"viz\":\"main\",\"name\": \"trimmedmax\",\"id\":\"2C1F4F2BAA2800FD80F50C3811F38D03B52DEEEB1\", \"color\":defaultColors[2]}}],loading: false, error: null})\n    data.push({\"data\":[{\"data\":minmaxareaset, \"metadata\":{\"viz\":\"main\",\"name\": \"minmaxarea\",\"id\":\"74B5B05EEA583471E03DCBF0123D81CC79CDE0FE9\", \"color\": defaultColors[9]}}],loading: false, error: null})\n    data.push({\"data\":[{\"data\":clippedareaset, \"metadata\":{\"viz\":\"main\",\"name\": \"clippedarea\",\"id\":\"74B5B05EEA583471E03DCBF0123D81CC79CDE0FE8\", \"color\": defaultColors[10]}}],loading: false, error: null})\n    data.push({\"data\":[{\"data\":minset, \"metadata\":{\"viz\":\"main\",\"name\": \"min\",\"id\":\"625D011FAC794651F25160AD89612DFAAE954C0CB\", \"color\":defaultColors[11]}}],loading: false, error: null})\n    data.push({\"data\":[{\"data\":maxset, \"metadata\":{\"viz\":\"main\",\"name\": \"max\",\"id\":\"DDB4E3844C923B3F794EC52642E22CBE9FC8D8D31\", \"color\": defaultColors[12]}}],loading: false, error: null})\n   \n}\n\nconst duration = 60*60*1000\nconst enddate =  Date.now() - duration\nconst startdate = enddate - duration*2\n\n// // Often provided by the PlatformState provider\nconst timeRange = {\n    begin_time: startdate,\n    duration: null, \n    end_time: enddate\n  };\n  \n// Often provided by the PlatformState provider\nconst ctx = {tvMode: false, accountId: c_accountid, filters: undefined, timeRange: timeRange}\n\nfunction AlignedTimeseries(props) {\n    const {nrqlQueries, alignment} = props;\n    const [queryResults, setQueryResults] = useState(null);\n    let cplatformstatecontext\n    \n    try {\n        cplatformstatecontext = useContext(PlatformStateContext);\n        console.log(\"unable to obtain ctx\",cplatformstatecontext)\n        \n    } catch (e) {\n        console.log(e)\n        cplatformstatecontext = ctx\n    }\n    console.log(\"running ctx is \", cplatformstatecontext)\n    useEffect(async () => {      \n            let windowsize = 180000\n            c_accountid = props.nrqlQueries[0].accountId\n            let mainquery = props.nrqlQueries[0].query\n            let compare= props.nrqlQueries[0].compare\n            let timeseries= props.nrqlQueries[0].timeseries\n            avgbol = props.nrqlQueries[0].average\n            minmaxareabol = props.nrqlQueries[0].minmaxareabol\n            trimmedareabol = props.nrqlQueries[0].trimmedareabol\n            clippedareabol = props.nrqlQueries[0].clippedareabol\n            hideoriginaldata = props.nrqlQueries[0].hideoriginaldata\n            if (cplatformstatecontext.timeRange != undefined) {\n                if (cplatformstatecontext.timeRange.duration == null){\n                    windowsize = (parseInt(cplatformstatecontext.timeRange.end_time) - parseInt(cplatformstatecontext.timeRange.begin_time)) / 1000\n                } else {\n                  windowsize = parseInt(cplatformstatecontext.timeRange.duration) / 1000\n                }\n                \n            }\n\n            if (props.nrqlQueries[0].trimpercent != \"\") {\n                trimpercent = props.nrqlQueries[0].trimpercent\n            }\n            if (props.nrqlQueries[0].clipsize != \"\") {\n                clipSize = props.nrqlQueries[0].clipsize\n            }\n           \n            // generate the compare queries\n            if (cplatformstatecontext.timeRange.duration == null) {\n                windowsize = windowsize*1000\n                for (let i = 0; i <= compare; i++) {\n                    if (i == 0 ) { \n                        let from = parseInt((cplatformstatecontext.timeRange.end_time) - windowsize)\n                        let until = parseInt(cplatformstatecontext.timeRange.end_time)\n                        // console.log(\"from\",parse_time_string(from))\n                        // console.log(\"until\",parse_time_string(until))\n                        let query = mainquery + \" SINCE \" + from + \" until \"+ until  + \" TIMESERIES \" + timeseries\n                        props.nrqlQueries[0].query = query\n                    } else {\n                        let from = parseInt(cplatformstatecontext.timeRange.end_time-(windowsize*(i+1)))\n                        let until = parseInt(cplatformstatecontext.timeRange.end_time-windowsize*(i))\n                        // console.log(\"from\",i,parse_time_string(from))\n                        // console.log(\"until\",i,parse_time_string(until))\n                        let query = mainquery + \" SINCE \" + from + \" until \"+ until + \" TIMESERIES \" + timeseries\n                        nrqlQueries.push({accountId: c_accountid, query: query, color: defaultColors[Math.floor(Math.random() * defaultColors.length)]})\n                        \n                        // console.log(\"until1\",parse_time_string(until))\n                        // console.log(\"query1 \", query)\n                    }                \n                }\n            } else {\n\n                for (let i = 0; i <= compare; i++) {\n                    let query = mainquery + \" SINCE \" + (parseInt(windowsize)*(i+1))  + \" seconds ago \" + \" until \"+ (parseInt(windowsize)*(i))  + \" seconds ago TIMESERIES \" + timeseries\n                    if (i == 0 ) {\n                        props.nrqlQueries[0].query = query\n                    } else {\n                        nrqlQueries.push({accountId: c_accountid, query: query, color: defaultColors[Math.floor(Math.random() * defaultColors.length)]})\n                    \n                    }                \n                }\n        }\n\n\n            let promises=nrqlQueries.map((q)=>{return NrqlQuery.query({accountIds: [q.accountId], query: q.query,formatTypeenum: NrqlQuery.FORMAT_TYPE.CHART})})\n            let data\n            try {\n                data = await Promise.all(promises)\n                if (data[0].error != null){\n                   console.log(data[0].error.message)\n                   globalerror = data[0].error.message\n                }\n            } catch (e){\n                console.log(e)\n            }\n\n            console.log(data)\n            // name the queries and update the colours\n            let count = 1\n            data.forEach(el => {\n                if (count != 1){\n                    el.data[0].metadata.name = data[0].data[0].metadata.name+(count-1)\n                    el.data[0].metadata.color = defaultColors[Math.floor(Math.random() * defaultColors.length)]\n                }\n                count ++\n            })\n\n            calculatedata(data)\n\n            setQueryResults(data)\n\n\n\n            // let refreshratems\n            // if (timeseries.includes(\"second\")) { // if the window size is 1 hour or more\n            //     refreshratems = 10*1000 // 10 seconds in ms\n            // } else if (timeseries.includes(\"minute\")) {\n            //     refreshratems = 30*1000 // 30 seconds in ms\n            // } else if (timeseries.includes(\"hour\") || timeseries.includes(\"week\")) { \n            //     refreshratems = 1800*1000 // 30 minutes   \n            // } else {\n            //     refreshratems = 5*1000 // 5 seconds in ms\n            // }\n\n            // const interval = setInterval(() => {console.log(\"Will refresh the data again in \",refreshratems);setQueryResults(data);}, refreshratems);\n\n        // return () => clearInterval(interval);            \n     },[props]);\n\n    \n    if (globalerror != undefined){\n        return <div><Spinner inline/>ERROR: {globalerror}</div>\n\n    } else if(queryResults) {\n        let seriesAlignment = !alignment || alignment ==\"\" ? \"start\" : alignment\n        const determineComparisonPoint = (r) => {\n            let comparisonPoint\n            switch(seriesAlignment) {\n                case \"middle\": {\n                    let midpoint = parseInt((r.data[0].data.length / 2)) - 1\n                    comparisonPoint = comparisonPoint = r.data[0].data[ midpoint].x\n                    break;                \n                }\n                case \"end\": {\n                    comparisonPoint = r.data[0].data[r.data[0].data.length-1].x\n                    break;           \n                }\n                default:{\n                    comparisonPoint = r.data[0].data[0].x\n                }\n            }\n            return comparisonPoint\n        }\n\n        //start alignment\n        let latest=0\n        queryResults.forEach((r)=>{\n            if(r.data && r.data[0] && r.data[0].metadata && r.data[0].data) {\n                let comparisonPoint=determineComparisonPoint(r)\n                if(comparisonPoint > latest) {\n                    latest=comparisonPoint\n                }\n            }\n        })\n\n        queryResults.forEach((r)=>{\n            if(r.data && r.data[0] && r.data[0].metadata && r.data[0].data) {\n                let comparisonPoint=determineComparisonPoint(r)\n                let resultSetBeginTime=comparisonPoint\n                let offset=latest-resultSetBeginTime\n                if(offset > 0) {\n                    r.data[0].data.forEach((row)=>{\n                        row.x= row.x + offset\n                    })\n                } \n            }\n        })\n\n        // convert unix timestamps to date time\n        unixtodatetime(queryResults)\n\n        let vizchartData=[]\n        let exportchartData=[]\n        let linechartdata = []\n        let arechartdata = []\n\n        queryResults.forEach(r=>{ if(r.data && r.data[0] && r.data[0].metadata.name != \"trimmedarea\" && r.data[0].metadata.name != \"minmaxarea\" && r.data[0].metadata.name != \"clippedarea\") {exportchartData.push(r.data[0])}}) \n        queryResults.forEach(r=>{ if(r.data && r.data[0] && (r.data[0].metadata.name != \"min\" && r.data[0].metadata.name != \"max\" && r.data[0].metadata.name != \"trimmedmin\" && r.data[0].metadata.name != \"trimmedmax\" && r.data[0].metadata.name != \"avg\" && r.data[0].metadata.name != \"trimmedarea\" && r.data[0].metadata.name != \"minmaxarea\" && r.data[0].metadata.name != \"clippedarea\") ){vizchartData.push(r.data[0])}}) \n        \n        if( avgbol == true ) {\n            queryResults.forEach(r=>{ if(r.data && r.data[0] && (r.data[0].metadata.name == \"avg\") ){linechartdata.push(r.data[0])}})\n            \n        }\n        if( trimmedareabol == true ) {\n            queryResults.forEach(r=>{ if(r.data && r.data[0] && (r.data[0].metadata.name == \"trimmedarea\") ){arechartdata.push(r.data[0])}})\n        }\n        \n        if( minmaxareabol == true ) {\n            queryResults.forEach(r=>{ if(r.data && r.data[0] && (r.data[0].metadata.name == \"minmaxarea\") ){arechartdata.push(r.data[0])}})\n        }\n\n        if( clippedareabol == true ) {\n            queryResults.forEach(r=>{ if(r.data && r.data[0] && (r.data[0].metadata.name == \"clippedarea\") ){arechartdata.push(r.data[0])}})\n        }\n        \n\n        if (hideoriginaldata == true ) {\n            vizchartData=[vizchartData[0]]\n        }\n     \n        let outTable= <>\n        <CSVLink filename=\"QueryData.csv\" data={exportToCsv(exportchartData)}>Download data as CSV</CSVLink>\n        </>\n        \n        return <AutoSizer>\n            {({ width, height }) => (<div style={{ height, width }}>\n            <ComposedChart width={width-15} height={height-15} margin={{top: 10, right: 10, bottom: 0, left: 0}}>\n          <CartesianGrid strokeDasharray=\"3 3\" /> \n          <XAxis dataKey=\"x\"  type=\"category\"  allowDuplicatedCategory={false}/>\n          <YAxis  dataKey=\"y\" type=\"number\" domain={['datamin - 10', 'dataMax + 10']} />\n          <Tooltip />\n          <Legend />\n          {vizchartData.map((s) => (<Line type=\"linear\" dot={false} stroke={s.metadata.color} strokeWidth={2} dataKey=\"y\" data={s.data} name={s.metadata.name} key={s.metadata.name}/>\n          ))\n          }\n          {\n          linechartdata.map((s) => (<Line type=\"linear\" dot={false} stroke={s.metadata.color} strokeWidth={5} dataKey=\"y\" data={s.data} name={s.metadata.name} key={s.metadata.name}/>))\n          }   \n          {arechartdata.map((s) => (<Area type=\"monotone\" fill={s.metadata.color} dataKey=\"y\" data={s.data}  name={s.metadata.name} strokeWidth={0} key={s.metadata.name}/>))}\n        </ComposedChart>\n        <Grid>\n            <GridItem columnSpan={12}>\n            {outTable}\n            </GridItem>\n        </Grid>\n          </div>\n        )}\n      </AutoSizer>\n    } else {\n        return <div className=\"EmptyState\">\n                <div className=\"loader\"><Spinner inline/> Loading and aligning data...</div>\n            </div>\n    }\n  }\n  \nexport default AlignedTimeseries;\n"],"sourceRoot":""}